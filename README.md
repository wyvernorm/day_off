# üìÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏∞ & ‡∏ß‡∏±‡∏ô‡∏•‡∏≤

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏ß‡∏±‡∏ô‡∏•‡∏≤ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å-‡∏Å‡∏•‡∏≤‡∏á  
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ **Cloudflare Worker + D1 Database**

## ‚ú® Features

| Feature | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î |
|---------|-----------|
| üìÖ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô | ‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö Google Calendar ‡πÄ‡∏´‡πá‡∏ô‡∏Å‡∏∞‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß |
| üìã ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏∞ | Roster view ‡∏î‡∏π‡∏Å‡∏∞‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ | ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ/‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏û‡∏£‡πâ‡∏≠‡∏° progress bar |
| üîÑ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞ | ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ |
| üìù ‡∏•‡∏≤‡∏á‡∏≤‡∏ô | ‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢/‡∏Å‡∏¥‡∏à/‡∏û‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏ô/‡∏Ñ‡∏•‡∏≠‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏° quota tracking |
| üîî ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‚Äî approve/reject ‡∏ß‡∏±‡∏ô‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞ |
| üî¥ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡πÑ‡∏ó‡∏¢ 2568-2569 |
| üë§ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô | ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô |

## üöÄ Setup

### 1. Clone & Install

```bash
git clone <your-repo>
cd shift-manager
npm install
```

### 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á D1 Database

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á database
wrangler d1 create shift-manager-db

# ‡∏à‡∏∞‡πÑ‡∏î‡πâ database_id ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ ‚Äî ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô wrangler.toml
```

### 3. ‡πÅ‡∏Å‡πâ `wrangler.toml`

```toml
[[d1_databases]]
binding = "DB"
database_name = "shift-manager-db"
database_id = "‡πÉ‡∏™‡πà_DATABASE_ID_‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô_2"
```

### 4. Init Database Schema

```bash
# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö local dev
npm run db:init:local

# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production
npm run db:init
```

### 5. Run / Deploy

```bash
# Local development
npm run dev

# Deploy to Cloudflare
npm run deploy
```

## üìÅ Project Structure

```
shift-manager/
‚îú‚îÄ‚îÄ wrangler.toml        # Cloudflare Worker config
‚îú‚îÄ‚îÄ schema.sql           # D1 database schema + seed data
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ index.js          # Main Worker entry point
    ‚îú‚îÄ‚îÄ api.js            # API routes handler
    ‚îî‚îÄ‚îÄ frontend.js       # Frontend HTML (served from Worker)
```

## üîå API Endpoints

### Employees
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/employees` | ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î |
| POST | `/api/employees` | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà |
| PUT | `/api/employees/:id` | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô |
| DELETE | `/api/employees/:id` | ‡∏•‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (soft delete) |

### Shifts
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/shifts?month=YYYY-MM` | ‡∏î‡∏π‡∏Å‡∏∞‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô |
| POST | `/api/shifts` | ‡∏ï‡∏±‡πâ‡∏á/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏∞ |
| POST | `/api/shifts/bulk` | ‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏∞‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (batch) |

### Leaves
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/leaves?month=YYYY-MM&status=pending` | ‡∏î‡∏π‡∏ß‡∏±‡∏ô‡∏•‡∏≤ |
| POST | `/api/leaves` | ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏•‡∏≤ (‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) |
| POST | `/api/leaves/range` | ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏•‡∏≤ (‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô) |
| PUT | `/api/leaves/:id/approve` | ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏•‡∏≤ |
| PUT | `/api/leaves/:id/reject` | ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏ß‡∏±‡∏ô‡∏•‡∏≤ |
| DELETE | `/api/leaves/:id` | ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏•‡∏≤ |

### Leave Quota
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/leave-quota?employee_id=1&year=2025` | ‡∏î‡∏π‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏•‡∏≤ |

### Swap Requests
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/swaps?status=pending` | ‡∏î‡∏π‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞ |
| POST | `/api/swaps` | ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞ |
| PUT | `/api/swaps/:id/approve` | ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏∞‡∏à‡∏£‡∏¥‡∏á) |
| PUT | `/api/swaps/:id/reject` | ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò |

### Holidays
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/holidays?year=2025` | ‡∏î‡∏π‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î |
| POST | `/api/holidays` | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î |
| DELETE | `/api/holidays/:id` | ‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î |

### Dashboard & Overview
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/dashboard` | ‡∏™‡∏£‡∏∏‡∏õ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ |
| GET | `/api/overview?month=YYYY-MM` | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡πÉ‡∏ä‡πâ load ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å) |
| GET | `/api/logs?limit=50` | Activity logs |

## üéØ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

- [ ] Authentication (Cloudflare Access / JWT)
- [ ] LINE Notify ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- [ ] Export ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô Excel
- [ ] Auto-generate ‡∏Å‡∏∞‡∏ï‡∏≤‡∏° pattern
- [ ] ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏∞ (Print-friendly)
- [ ] Dark mode

## üìÑ License

MIT
